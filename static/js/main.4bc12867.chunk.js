(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports=a.p+"static/media/GravityAnimating.34068f26.svg"},14:function(e,t,a){e.exports=a(24)},20:function(e,t,a){},23:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),i=a.n(c),s=(a(20),a(1)),o=a.n(s),l=a(4),u=a(3),m=a(8),p=a(9),f=a(12),h=a(10),g=a(13),d=(a(23),a(11)),v=a.n(d),b=new URL("https://gateway.marvel.com/v1/public/comics"),E={ts:"1",apikey:"1136faa63131cec339ae63058b627b70",hash:"7abf5f031a9f3f0031ac8c51fcfe8da0",format:"comic",formatType:"comic",noVariants:!0,hasDigitalIssue:!1};Object.keys(E).forEach(function(e){return b.searchParams.append(e,E[e])});var w=function(){var e=Object(u.a)(o.a.mark(function e(t){var a,n,r,c,i,s,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=["orderBy","titleStartsWith","limit","offset"],e.next=3,a.forEach(function(e){return t[e]?b.searchParams.set(e,t[e]):b.searchParams.delete(e)});case 3:return e.next=5,fetch(b);case 5:return n=e.sent,e.next=8,n.json();case 8:return r=e.sent,e.next=11,r.data;case 11:return c=e.sent,i=c.offset,s=c.total,e.next=16,r.data.results;case 16:return l=e.sent,e.abrupt("return",{list:l,offset:i,total:s});case 18:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),y=function(e){var t=e.closePopup,a=e.comics,n=e.title,c=e.image;return r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"popup_inner"},r.a.createElement("div",{className:"popup_inner-left"},c),r.a.createElement("div",{className:"popup_inner-right"},n,r.a.createElement("p",null,a.description),r.a.createElement("div",{className:"popup_inner-links"},a.urls.map(function(e,t){return r.a.createElement("a",{key:t,href:e.url},e.type)}))),r.a.createElement("button",{onClick:t},"close me")))},O=function(e){var t=e.image;return r.a.createElement("div",{className:"comics-wrapper"},r.a.createElement("div",{className:"image"},t))},j=a(5),P=a(2),k=function(e){var t=e.optionsValuesArr,a=e.description;return t.map(function(e){return r.a.createElement("option",{key:e,value:e},a,": ",e)})},C=function(e){var t=e.updateComics,a=e.limit,n=e.orderBy,c=function(e){var a=e.target,n=a.name,r=a.value;t(Object(j.a)({},n,r))};return r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=e.target.elements,n=Object(P.a)(a).reduce(function(e,t){return t.name.toLowerCase().includes("button")?e:Object(l.a)({},e,Object(j.a)({},t.name,t.value))},{});t(n)}},r.a.createElement("select",{onChange:c,defaultValue:n,className:"search__item search__select",name:"orderBy"},r.a.createElement(k,{optionsValuesArr:["modified","-modified","title","-title"],description:"Order by"})),r.a.createElement("select",{onChange:c,defaultValue:a,className:"search__item search__select",name:"limit"},r.a.createElement(k,{optionsValuesArr:[10,20,30,40,50],description:"Comics per page"})),r.a.createElement("input",{className:"search__item search__input",placeholder:"title starts with .....",name:"titleStartsWith"}),r.a.createElement("button",{name:"button",className:"search__item search__button"},"search"))},_=function(e){var t=e.limit,a=e.offset,n=e.total,c=e.handleClick;if(n&&t){var i=function(e,t,a){var n=function(t){return Math.ceil(t/e)},r=n(t)+1,c=n(a),i=5;i=i%2?i++:i;var s=Math.ceil(i/2),o=function(e){return Array.from(new Array(e)).map(function(e,t){return t+1})},l=o(i);if(c<1)return{pagesArr:[],currentPage:r};if(1<=c&&c<=i)return o(c);if(c>i){if(r<=s)return{pagesArr:[].concat(Object(P.a)(l),["...",c]),currentPage:r};var u=l.map(function(e){return r-s+e});if(r===s+1)return{pagesArr:[1].concat(Object(P.a)(u),["...",c]),currentPage:r};if(r===c-s)return{pagesArr:[1,"..."].concat(Object(P.a)(u),[c]),currentPage:r};var m=l.map(function(e){return c-e+1}).reverse();return r>c-s?{pagesArr:[1,"..."].concat(Object(P.a)(m)),currentPage:r}:{pagesArr:[1,"..."].concat(Object(P.a)(u),["...",c]),currentPage:r}}}(t,a,n),s=i.pagesArr,o=i.currentPage;return r.a.createElement("ul",{className:"pagination_list",onClick:function(e){var a=e.target.innerHTML;e.target.matches("li")&&"..."!==a&&a!=o&&c({offset:(a-1)*t})}},s.map(function(e,t){return e===o?r.a.createElement("li",{className:"pagination_selected-list-item",key:t},e):r.a.createElement("li",{key:t},e)}))}return null},A=function(e){var t=e.title;return r.a.createElement("h2",null,t)},x=function(e){var t=e.path,a=e.extension,n=e.alt;return r.a.createElement("img",{src:"".concat(t,".").concat(a),alt:n})},N=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={list:[],isLoading:!0,searchParams:{orderBy:"modified",titleStartsWith:"",limit:20,offset:0,total:0},showPopup:!1},a.getComicsData=Object(u.a)(o.a.mark(function e(){var t,n,r,c,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.searchParams,e.next=3,w(t);case 3:n=e.sent,r=n.list,c=n.offset,i=n.total,a.setState({searchParams:Object(l.a)({},t,{offset:c,total:i}),list:r,isLoading:!1});case 8:case"end":return e.stop()}},e)})),a.updateComics=function(){var e=Object(u.a)(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state.searchParams,e.next=3,a.setState({isLoading:!0,searchParams:Object(l.a)({},n,t)});case 3:a.getComicsData();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.popupTargetComics=function(e){var t=e.target.alt;if(t){var n=a.state.list.find(function(e){return e.title===t});a.setState({targetComics:n}),a.togglePopup()}},a.togglePopup=function(){a.setState({showPopup:!a.state.showPopup})},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.getComicsData();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.list,a=e.isLoading,n=e.targetComics,c=e.showPopup,i=e.searchParams;return r.a.createElement("div",{className:"App"},r.a.createElement("nav",null,r.a.createElement(C,Object.assign({updateComics:this.updateComics},i))),a?r.a.createElement("img",{src:v.a,className:"App-logo",alt:"logo"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{onClick:this.popupTargetComics},t.map(function(e){return r.a.createElement(O,{key:e.id,image:r.a.createElement(x,Object.assign({},e.thumbnail,{alt:e.title}))})}),t.length?null:r.a.createElement("h2",null,'Oops nothing found ":("')),r.a.createElement(_,Object.assign({handleClick:this.updateComics},i))),c?r.a.createElement(y,{text:"Close Me",closePopup:this.togglePopup,comics:n,title:r.a.createElement(A,{title:n.title}),image:r.a.createElement(x,Object.assign({},n.thumbnail,{alt:n.title}))}):null)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[14,1,2]]]);
//# sourceMappingURL=main.4bc12867.chunk.js.map